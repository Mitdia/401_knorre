<!DOCTYPE html>
<html>
<head>
    <title>Upload File and Send POST Request</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

</head>
<body>
 <!-- Upload file button -->
 <form action="#" method="post" enctype="multipart/form-data">
    <label for="file">Choose a text file:</label>
    <input type="file" id="file" name="file" accept=".txt"><br><br>
    <input type="button" value="Upload" onclick="uploadFile()">
</form>
  

 <!-- Text field to display uploaded text -->
 <label for="text">Uploaded Text:</label>
 <div id="text" rows="10" cols="50"></div><br><br>

 <!-- Text box to enter text -->
 <label for="question">Question:</label>
 <textarea id="question" rows="10" cols="50"></textarea><br><br>

 <!-- Text field to display the answer -->
 <label for="answer">Answer:</label>
 <div id="answer" rows="10" cols="50"></div><br><br>

 <!-- Button to send POST request -->
 <button onclick="sendPostRequest()">Send question</button>

 <script>
    async function sendPostRequest() 
    {
        try 
        {
            const url = "https://localhost:7146/Bert";
            const data = { 
                text: document.getElementById("text").innerText,
                question: document.getElementById("question").value 
            };

            console.log("Request sent!")

            response = await fetch(url, {
                method: "POST",
                body: JSON.stringify(data),
                headers: 
                {
                    "Content-Type": "application/json"
                }
            })
            console.log(response);
            response = await response.json();
            console.log(response);
            document.getElementById("answer").innerText = response.answer;
        }
        catch(e) 
        {
            e => console.log(e);
        }
    }

    function uploadFile() 
    {
        const input = document.getElementById("file");
        const file = input.files[0];

        if (file)
        {
            const reader = new FileReader();

            reader.onload = function(e) 
            {
                const text = e.target.result;
                document.getElementById("text").innerText = text;
            }

            reader.readAsText(file);
        }
    }
 </script>
</body>
</html>